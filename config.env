# =============================================================================
# Traffic Decree Processing Model - Configuration Template
# =============================================================================
# Non-secret configuration that can be safely committed to Git
# Copy this to .env and add your secrets (API keys, passwords, etc.)

# POSTGRES database Configuration
POSTGRES_DB=n8n_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# N8N service Configuration
N8N_WEBHOOK_URL=http://n8n:5678/webhook/your-webhook-id-here
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=http

# API Service Ports
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000
FEATURE_MATCHING_HOST=0.0.0.0
FEATURE_MATCHING_PORT=8005

# KOOP API Configuration (VERKEERSBESLUIT_ prefix)
VERKEERSBESLUIT_API__HOST=0.0.0.0
VERKEERSBESLUIT_API__PORT=8000
VERKEERSBESLUIT_API__PROTOCOL=http
VERKEERSBESLUIT_API__EXTERNAL_SERVICE_NAME=koop-api-service

# KOOP API Rate Limiting
VERKEERSBESLUIT_RATE_LIMIT__REQUEST_DELAY=2.0
VERKEERSBESLUIT_RATE_LIMIT__MAX_RETRIES=3
VERKEERSBESLUIT_RATE_LIMIT__REQUEST_TIMEOUT=30
VERKEERSBESLUIT_RATE_LIMIT__CONNECT_TIMEOUT=10
VERKEERSBESLUIT_RATE_LIMIT__MAX_RETRY_DELAY=10.0

# KOOP API File Settings
VERKEERSBESLUIT_FILE__MIN_IMAGE_SIZE_BYTES=50000
VERKEERSBESLUIT_FILE__MIN_PDF_SIZE_BYTES=50000
VERKEERSBESLUIT_FILE__PDF_CONVERSION_DPI=300

# KOOP API SRU Settings
VERKEERSBESLUIT_SRU__MAX_RECORDS_PER_REQUEST=900

# KOOP API Logging
VERKEERSBESLUIT_LOGGING__LEVEL=INFO

# AI Models
OLLAMA_HOST=ollama:11434
OLLAMA_MODEL=qwen2.5:7b
OLLAMA_MAX_LOADED_MODELS=1
OLLAMA_NUM_PARALLEL=1

# System Resources (adjust for your hardware)
CPU_CORES=8
TORCH_THREADS=8
MAX_MEMORY_MB=6000

# Docker Container Settings
OLLAMA_DATA_PATH=./ollama-data
PYTHONUNBUFFERED=1
GUNICORN_CMD_ARGS=--log-level debug --error-logfile - --access-logfile -
CUDA_VISIBLE_DEVICES=-1

# ROMA Feature Matching (CPU optimization)
ROMA_FORCE_CPU=true
ROMA_MEMORY_EFFICIENT=true
ROMA_MAX_IMAGE_SIZE=196
ROMA_MAX_KEYPOINTS=200
ROMA_COARSE_RES=196
ROMA_UPSAMPLE_RES=280

# Feature Matching Settings
ENABLE_MULTIPROCESSING=true
BATCH_SIZE=4
BUFFER_SIZES=20,800,5000
MIN_MATCH_COUNT=10
MIN_INLIER_RATIO=0.1
IMAGE_RESIZE_MAX_PIXELS=4200000

# Cleanup Settings
OLLAMA_CLEANUP_THRESHOLD_GB=10
OLLAMA_MAX_GB=20
FEATURE_MATCHING_OUTPUT_RETENTION_DAYS=7
FEATURE_MATCHING_UPLOAD_RETENTION_DAYS=2

